{
  "title": "API Documentation",
  "description": "This document outlines the specifications for the API endpoints used in our dating application.",
  "version": "1.0.0",
  "basePath": "/api",
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "name": { "type": "string" },
        "email": { "type": "string" },
        "role": { "type": "string" },
        "status": { "type": "string" },
        "birthDate": { "type": ["string", "null"], "format": "date-time" },
        "banReason": { "type": ["string", "null"] },
        "bio": { "type": ["string", "null"] },
        "locationLat": { "type": ["number", "null"] },
        "locationLng": { "type": ["number", "null"] },
        "gender": { "type": ["string", "null"] },
        "verified": { "type": "boolean" },
        "lastActive": { "type": ["string", "null"], "format": "date-time" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "UserPreferences": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "userId": { "type": "integer" },
        "minAge": { "type": ["integer", "null"] },
        "maxAge": { "type": ["integer", "null"] },
        "distanceRadius": { "type": ["integer", "null"] },
        "relationshipType": { "type": ["string", "null"] },
        "theme": { "type": ["string", "null"] },
        "hiddenProfile": { "type": ["boolean", "null"] },
        "showOnlineStatus": { "type": ["boolean", "null"] },
        "notificationsEnabled": { "type": ["boolean", "null"] },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    }
  },
  "resources": [
    {
      "title": "User Authentication",
      "description": "Endpoints for user authentication, including login and registration.",
      "routes": [
        {
          "type": "POST",
          "description": "User login",
          "path": "/auth/login",
          "body": [
            {
              "key": "email",
              "type": "string",
              "value": "ronaldcoello85@gmail.com",
              "required": true,
              "description": "User's email address"
            },
            {
              "key": "password",
              "type": "string",
              "value": "StrongPassword123",
              "required": true,
              "description": "User's password"
            }
          ],
          "responses": {
            "200": {
              "description": "Login successful",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean" },
                  "message": { "type": "string" },
                  "data": {
                    "type": "object",
                    "properties": {
                      "user": { "$ref": "#/definitions/User" },
                      "token": { "type": "string" },
                      "refreshToken": { "type": "string" }
                    }
                  }
                }
              }
            },
            "401": {
              "description": "Invalid credentials",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Invalid email or password" }
                }
              }
            },
            "429": {
              "description": "Too many login attempts",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Too many login attempts. Please try again later." }
                }
              }
            }
          },
          "response": {
            "success": true,
            "message": "Login successful",
            "data": {
              "user": {
                "id": 7,
                "name": "Ronald",
                "email": "ronaldcoello@gmail.com",
                "role": "USER",
                "status": "ACTIVE",
                "birthDate": null,
                "banReason": null,
                "bio": null,
                "locationLat": null,
                "locationLng": null,
                "gender": null,
                "verified": false,
                "lastActive": null,
                "createdAt": "2025-04-08T14:44:10.886Z",
                "updatedAt": "2025-04-08T14:44:10.886Z"
              },
              "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjcsImlhdCI6MTc0NDEyMzY0NCwiZXhwIjoxNzQ0MTIzNzA0fQ.mEqT-dtxRZxwCS4fROv60MSdjNmSggIKtFRFQtSV9kg",
              "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjcsImlhdCI6MTc0NDEyMzY0NCwiZXhwIjoxNzQ5MzA3NjQ0fQ.8vxXeFbrJKb0TBxJhkJ8MeenzUGjfFkC5vSyXCyJMNU"
            }
          }
        },
        {
          "type": "POST",
          "description": "User registration",
          "path": "/auth/register",
          "body": [
            {
              "key": "name",
              "type": "string",
              "required": true,
              "value": "Ronald",
              "description": "User's name"
            },
            {
              "key": "email",
              "type": "string",
              "value": "ronaldcoello@gmail.com",
              "required": true,
              "description": "User's email address"
            },
            {
              "key": "password",
              "type": "string",
              "required": true,
              "value": "StrongPassword123",
              "description": "User's password"
            }
          ],
          "responses": {
            "201": {
              "description": "User registered successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean" },
                  "message": { "type": "string" },
                  "data": {
                    "type": "object",
                    "properties": {
                      "user": { "$ref": "#/definitions/User" },
                      "token": { "type": "string" },
                      "refreshToken": { "type": "string" }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Invalid input",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Invalid input data" },
                  "errors": { "type": "array", "items": { "type": "string" } }
                }
              }
            },
            "409": {
              "description": "Email already registered",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Email already registered" }
                }
              }
            }
          },
          "response": {
            "success": true,
            "message": "User registered successfully",
            "data": {
              "user": {
                "id": 7,
                "name": "Ronald",
                "email": "ronaldcoello@gmail.com",
                "role": "USER",
                "status": "ACTIVE",
                "birthDate": null,
                "banReason": null,
                "bio": null,
                "locationLat": null,
                "locationLng": null,
                "gender": null,
                "verified": false,
                "lastActive": null,
                "createdAt": "2025-04-08T14:44:10.886Z",
                "updatedAt": "2025-04-08T14:44:10.886Z"
              },
              "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjcsImlhdCI6MTc0NDEyMzQ1MCwiZXhwIjoxNzQ0MTIzNTEwfQ.1WYJ7eVoaJUxlLwjKpUav5ESjrv2AIYlkMcqYhn-3mc",
              "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjcsImlhdCI6MTc0NDEyMzQ1MCwiZXhwIjoxNzQ5MzA3NDUwfQ.d7-iJspTmZcnBByILBAazBPleJ1aPA9kFccJrWz8OqE"
            }
          }
        },
        {
          "type": "PUT",
          "description": "Update user profile",
          "path": "/users/profile",
          "headers": [
            {
              "key": "Authorization",
              "value": "Bearer {token}",
              "required": true,
              "description": "Authorization token JWT"
            },
            {
              "key": "x-refresh-token",
              "value": "{token}",
              "required": true,
              "description": "Refresh token JWT"
            }
          ],
          "body": [
            {
              "key": "name",
              "value": "Ronald",
              "type": "string",
              "required": false,
              "description": "User's name"
            },
            {
              "key": "birthDate",
              "value": "1990-01-01",
              "type": "date",
              "required": false,
              "description": "User's birth date"
            },
            {
              "key": "bio",
              "value": "Hello, I'm Ronald!",
              "type": "string",
              "required": false,
              "description": "User's bio"
            }
          ],
          "responses": {
            "200": {
              "description": "Profile updated successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean" },
                  "message": { "type": "string" },
                  "data": {
                    "type": "object",
                    "properties": {
                      "user": { "$ref": "#/definitions/User" },
                      "isProfileComplete": { "type": "boolean" }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Invalid input data",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Invalid input data" },
                  "errors": { "type": "array", "items": { "type": "string" } }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Authentication required" }
                }
              }
            },
            "403": {
              "description": "Forbidden",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "You don't have permission to update this profile" }
                }
              }
            }
          },
          "response": {
            "success": true,
            "message": "Profile updated successfully",
            "data": {
              "user": {
                "id": 7,
                "name": "Ronald",
                "email": "ronaldcoello6@gmail.com",
                "role": "USER",
                "status": "ACTIVE",
                "birthDate": "1990-01-01T00:00:00.000Z",
                "banReason": null,
                "bio": "Hello, I'm Ronald!",
                "locationLat": null,
                "locationLng": null,
                "gender": null,
                "verified": false,
                "lastActive": "2025-04-08T14:47:24.659Z",
                "createdAt": "2025-04-08T14:44:10.886Z",
                "updatedAt": "2025-04-08T15:14:14.299Z"
              },
              "isProfileComplete": false
            }
          }
        }
      ]
    },
    {
      "title": "User Preferences",
      "description": "Endpoints for managing user preferences.",
      "routes": [
        {
          "type": "GET",
          "description": "Get user preferences",
          "path": "/users/preferences",
          "headers": [
            {
              "key": "Authorization",
              "value": "Bearer {token}",
              "required": true,
              "description": "Authorization token JWT"
            },
            {
              "key": "x-refresh-token",
              "value": "{token}",
              "required": true,
              "description": "Refresh token JWT"
            }
          ],
          "responses": {
            "200": {
              "description": "Preferences retrieved successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean" },
                  "message": { "type": "string" },
                  "data": { "$ref": "#/definitions/UserPreferences" }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Authentication required" }
                }
              }
            },
            "404": {
              "description": "Preferences not found",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Preferences not found" }
                }
              }
            }
          },
          "response": {
            "success": true,
            "message": "Preferences retrieved successfully",
            "data": {
              "id": 2,
              "userId": 7,
              "minAge": null,
              "maxAge": 30,
              "distanceRadius": null,
              "realtionshipType": null,
              "theme": null,
              "hiddenProfile": null,
              "showOnlineStatus": null,
              "notificationsEnabled": null,
              "createdAt": "2025-04-08T15:08:55.843Z",
              "updatedAt": "2025-04-08T15:09:12.469Z"
            }
          }
        },
        {
          "type": "PATCH",
          "description": "Update user preferences. These preferences are used to customize the swipe experience.",
          "path": "/users/preferences",
          "headers": [
            {
              "key": "Authorization",
              "value": "Bearer {token}",
              "required": true,
              "description": "Authorization token JWT"
            },
            {
              "key": "x-refresh-token",
              "value": "{token}",
              "required": true,
              "description": "Refresh token JWT"
            }
          ],
          "body": [
            {
              "key": "maxAge",
              "type": "integer",
              "value": 30,
              "required": false,
              "description": "Maximum age preference for matches"
            },
            {
              "key": "minAge",
              "type": "integer",
              "value": 28,
              "required": false,
              "description": "Minimum age preference for matches"
            }
          ],
          "responses": {
            "200": {
              "description": "Preferences updated successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean" },
                  "message": { "type": "string" },
                  "data": { "$ref": "#/definitions/UserPreferences" }
                }
              }
            },
            "400": {
              "description": "Invalid input data",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Invalid input data" },
                  "errors": { "type": "array", "items": { "type": "string" } }
                }
              }
            },
            "401": {
              "description": "Unauthorized",
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "message": { "type": "string", "example": "Authentication required" }
                }
              }
            }
          },
          "response": {
            "success": true,
            "message": "Preferences updated successfully",
            "data": {
              "id": 2,
              "userId": 7,
              "minAge": null,
              "maxAge": 30,
              "distanceRadius": null,
              "realtionshipType": null,
              "theme": null,
              "hiddenProfile": null,
              "showOnlineStatus": null,
              "notificationsEnabled": null,
              "createdAt": "2025-04-08T15:08:55.843Z",
              "updatedAt": "2025-04-08T15:09:12.469Z"
            }
          }
        }
      ]
    }
  ]
}